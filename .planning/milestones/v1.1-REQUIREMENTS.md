# Requirements Archive: v1.1 Fragile Area Hardening

**Archived:** 2026-02-02
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: VGlyph

**Defined:** 2026-02-02
**Core Value:** Reliable text rendering without crashes or undefined behavior

## v1.1 Requirements

Requirements for Fragile Area Hardening milestone.

### Layout Iteration

- [x] **ITER-01**: Iterator wrapper with automatic cleanup via defer
- [x] **ITER-02**: Documentation of iterator lifecycle rules in code
- [x] **ITER-03**: Guard against iterator reuse after exhaustion

### Attribute List

- [x] **ATTR-01**: Ownership documentation (who unrefs what)
- [x] **ATTR-02**: Safe API that prevents double-free
- [x] **ATTR-03**: Leak validation in debug builds

### FreeType State

- [x] **FT-01**: Document mandatory load→translate→render sequence
- [x] **FT-02**: State validation before translate in debug builds
- [x] **FT-03**: Consistent fallback path handling (matches normal path)

### Vertical Coords

- [x] **VERT-01**: Inline documentation of coordinate transform logic
- [x] **VERT-02**: Exhaustive orientation enum matching
- [x] **VERT-03**: Clearer upright vs rotated distinction

## Future Requirements

Deferred to later milestones.

### Performance

- **PERF-01**: Multi-page atlas with LRU eviction
- **PERF-02**: Glyph cache collision detection
- **PERF-03**: FreeType metrics caching
- **PERF-04**: GPU-based bitmap scaling

### Test Coverage

- **TEST-01**: Error path tests (OOM, load failures)
- **TEST-02**: Edge case tests (empty layout, RTL+vertical)
- **TEST-03**: Memory stress tests

## Out of Scope

Explicitly excluded from v1.1.

| Feature | Reason |
|---------|--------|
| Performance optimizations | Separate concern, defer to v1.2+ |
| Test coverage expansion | Separate concern, defer to v1.2+ |
| Thread safety | V is single-threaded by design |
| API breaking changes | Hardening should preserve existing API |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| ITER-01 | Phase 4 | Complete |
| ITER-02 | Phase 4 | Complete |
| ITER-03 | Phase 4 | Complete |
| ATTR-01 | Phase 5 | Complete |
| ATTR-02 | Phase 5 | Complete |
| ATTR-03 | Phase 5 | Complete |
| FT-01 | Phase 6 | Complete |
| FT-02 | Phase 6 | Complete |
| FT-03 | Phase 6 | Complete |
| VERT-01 | Phase 7 | Complete |
| VERT-02 | Phase 7 | Complete |
| VERT-03 | Phase 7 | Complete |

**Coverage:**
- v1.1 requirements: 12 total
- Mapped to phases: 12/12 ✓
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 12 of 12 v1.1 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-02-02 as part of v1.1 milestone completion*
